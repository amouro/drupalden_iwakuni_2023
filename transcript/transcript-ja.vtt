WEBVTT

1
00:00:05.640 --> 00:00:08.550
こんにちは、クリスと申します。今日はDrupalDEN岩国でスペシャルトークをすることになり、光栄です。
今日は沖縄科学技術大学院大学の
2
00:00:20.780 --> 00:00:25.009
リニューアルされたウェブサイトを発表します。
英語で技術的な内容を発表した方がやりやすいのですが、

3
00:00:32.220 --> 00:00:35.040
それでも後で日本語でお話しして、ご意見をいただくのが楽しみです。

4
00:00:43.100 --> 00:00:45.610
こんにちは、クリスと申します

5
00:00:45.750 --> 00:00:50.490
本日、DrupalDEN岩国で特別講演をさせていただくことを光栄に思います。

6
00:00:51.120 --> 00:00:53.269
本学OISTでは

7
00:00:53.450 --> 00:00:56.940
Drupal 7のリリース初年度の2011年にサイトを構築しました。

8
00:00:57.090 --> 00:00:59.520
サイトを構築しました。

9
00:01:00.030 --> 00:01:04.300
Drupal 7はすべてのDrupalのバージョンの中で最も長い寿命を持ち、

10
00:01:04.510 --> 00:01:08.919
プラットフォームに大きな変化をもたらしました。

11
00:01:09.450 --> 00:01:15.560
これらの変更の1つは、Content TypeのエンティティフィールドとしてCCKが統合され、

12
00:01:16.140 --> 00:01:19.309
Viewsがコアにもたらされたことです。

13
00:01:19.380 --> 00:01:23.989
さらに、ImageCacheはImage Styleに生まれ変わりました。

14
00:01:24.370 --> 00:01:25.439
昨年、

15
00:01:25.700 --> 00:01:31.679
私たちはDrupal 9を使用してウェブサイトを再構築するための2年間の旅を経験しました。

16
00:01:33.150 --> 00:01:41.479
講演の前半では、Webサイトの再構築の際に行った開発とプロジェクト管理のプロセスについて説明します。

17
00:01:42.280 --> 00:01:44.120
第二部では

18
00:01:44.330 --> 00:01:50.089
英語と日本語のバイリンガルに向けたウェブサイトのローカライズで

19
00:01:50.160 --> 00:01:53.879
直面した課題について、より深く掘り下げます。

20
00:01:54.610 --> 00:02:05.050
また、単なる翻訳にとどまらず、どのような問題に直面したのか。
どのように対処し、ユーザーに最高のユーザーエクスペリエンスを提供したかをお話しします。

21
00:02:07.540 --> 00:02:08.420
まず、

22
00:02:08.449 --> 00:02:10.450
僕のことを少しご紹介します。

23
00:02:10.720 --> 00:02:15.389
私はDrupalの開発者で、14年の経験があります。

24
00:02:16.590 --> 00:02:24.499
繁体字中国語、日本語、英語でのウェブデザインと開発の経験が豊富です。

25
00:02:24.760 --> 00:02:31.319
Drupalコミュニティのメンバーでもあり、台湾の元グループリーダーでもあります。

26
00:02:31.920 --> 00:02:40.630
Drupal以外では、コーヒー、ドイツ、猫に興味があり、これらのトピックについての会話も歓迎します。

27
00:02:41.540 --> 00:02:43.309
本題に入る前に

28
00:02:43.400 --> 00:02:50.390
この講演でベンダーやサービスについての言及があっても、それを推奨するものではないことにご了承ください。

29
00:02:47.580 --> 00:02:48.620


30
00:02:48.760 --> 00:02:50.390


31
00:02:50.580 --> 00:02:55.969
Drupal 7の旧サイトは、私たちによく貢献してくれました。3,000万人以上の訪問者と

32
00:02:56.030 --> 00:03:01.170
37,000のコンテンツを提供しました。

33
00:03:01.390 --> 00:03:05.340
この3年間で月間の訪問者数が2倍になりました。

34
00:03:06.380 --> 00:03:14.369
このサイトでは、私たちの成果を世界に発信しています。
例えば、新しい研究棟が完成したとき。

35
00:03:14.460 --> 00:03:22.130
Nature誌で高い影響力を持つランキングを獲得したとき。ノーベル賞受賞などの成果を世界に発信しました。

36
00:03:23.100 --> 00:03:27.019
私たちの成功を継続的に祝うサイトです。

37
00:03:27.790 --> 00:03:35.170
しかし、私たちはこれからもイノベーションに努め、日本の研究の未来を切り開いていきます。

38
00:03:35.550 --> 00:03:38.790
これらの目標を達成するために 

39
00:03:38.790 --> 00:03:38.850


40
00:03:38.870 --> 00:03:48.440
新しい目標を設定し、その成果をより効果的かつ柔軟に提供できる新しいウェブサイトが必要です。より効果的で柔軟な方法で、私たちの成果をお届けすることができます。

41
00:03:49.440 --> 00:03:55.369
2020年、沖縄科学技術大学院大学は戦略計画を定め

42
00:03:50.960 --> 00:03:52.470


43
00:03:52.620 --> 00:03:55.369


44
00:03:55.390 --> 00:04:01.909
活動の3本柱を重視するようになりました。研究、教育、そしてイノベーション。

45
00:04:02.200 --> 00:04:12.700
また、STEM教育への関心を高め、沖縄に貢献することも私たちの責務です。そして、日本社会へのアウトリーチ活動も私たちの責務です。

46
00:04:12.920 --> 00:04:17.980
プロジェクト全体を通して この3つの柱を常に意識しています。

47
00:04:18.050 --> 00:04:24.960
プロジェクト全体を通して、この3つの柱を念頭に置き、Webサイトが組織の戦略に合致するようにしました。

48
00:04:24.960 --> 00:04:25.360


49
00:04:25.410 --> 00:04:31.900
技術的な面では、編集者のコンテンツ管理体験を向上させることが目標でした。

50
00:04:32.300 --> 00:04:37.520
Drupal 9では、メディアライブラリを使ってアセットを管理できるようになりました。
51
00:04:37.770 --> 00:04:42.080
また、ノードの翻訳方法をフィールド翻訳に変更しました。

52
00:04:42.630 --> 00:04:56.459
また、Drupalだけでなく、デザインシステムも導入し、ユーザーエクスペリエンスの一貫性を保つようにしました。また、Drupalの他にも、ユーザーエクスペリエンスの一貫性を保つためにデザインシステムを導入し、コンテンツ制作時にWebコンポーネントを簡単に再利用できるようにしました。

53
00:04:56.770 --> 00:05:00.610
Webサイトプロジェクトは、大きく3つのフェーズに分かれていました。

54
00:05:00.880 --> 00:05:13.519
2020年12月にベンダーと共同で包括的なユーザー調査を実施し を実施し、社内外のユーザーであるステークホルダーへの理解を深めました。

55
00:05:13.610 --> 00:05:17.690
この調査により、ユーザーが私たちをどのように認識しているのかが明らかになりました。

56
00:05:17.930 --> 00:05:22.040
と、ウェブサイトの情報アーキテクチャをどのように改善すればよいかを明らかにしました。

57
00:05:23.300 --> 00:05:29.739
第2フェーズでは Drupal 9を使用した新しいWebサイトの構築とコンテンツの移行を別のベンダーに依頼しました。

58
00:05:30.200 --> 00:05:33.150
ベンダーが開発を完了した後、

59
00:05:33.310 --> 00:05:36.089
当社のウェブチームがコンテンツを引き継ぎました。

60
00:05:36.390 --> 00:05:44.409
私たちはそれを変換してコンテンツを作り直し、コンテンツ所有者に新しいウェブサイトの使い方をトレーニングしています。

61
00:05:45.150 --> 00:05:50.630
また、開発者と私は、更新作業と追加問題の解決に取り組みます。

62
00:05:51.600 --> 00:05:59.589
プロジェクト開始から2年後の昨年12月、無事リニューアルを果たしました。

63
00:05:59.880 --> 00:06:03.050
OISTのコミュニティからも好評をいただいています。

64
00:06:04.090 --> 00:06:07.070
それでは、早速サイトを覗いてみましょう。

65
00:06:07.840 --> 00:06:12.840
カラースキームを再定義し、サイト全体に新しいウェブコンポーネントを使用しました。

66
00:06:14.030 --> 00:06:18.150
メガメニューは、ユーザーにより良いナビゲーションマップを提供します。

67
00:06:20.370 --> 00:06:27.809
メディア・エディターは、関連コンテンツを手動で選択することも、システムに関連コンテンツを選択させることも可能です。

68
00:06:31.660 --> 00:06:34.449
フリッカーをサイトに統合し

69
00:06:34.490 --> 00:06:38.130
ユーザーが写真集をプレビューできるようにしました。

70
00:06:39.920 --> 00:06:42.770
さまざまなキャンペーンや特別委員会のために、

71
00:06:42.910 --> 00:06:44.959
マイクロサイト機能を設け、

72
00:06:45.060 --> 00:06:50.319
独自のコンテンツを管理し、独自のロゴを表示できるようにしました。

73
00:06:53.300 --> 00:06:58.599
最後に、私たちがウェブサイトのためにデザインしたコンポーネントを紹介するスタイルガイドも

74
00:06:58.670 --> 00:07:01.009
作成しました。

75
00:07:09.140 --> 00:07:12.879
さて、次は技術的な面です。

76
00:07:12.910 --> 00:07:19.830
ここでは、マイグレーションプロセスの概要と、開発プロジェクトの管理方法について説明したいと思います。

77
00:07:20.330 --> 00:07:24.580
マイグレーションは、私たちのプロジェクトにおいて最初にして最も重要な要素でした。

78
00:07:24.700 --> 00:07:28.579
重要なコンテンツや資産はすべて移行する必要があります。

79
00:07:28.750 --> 00:07:37.349
コンテンツノードの移行だけでなく、CMSで管理されていないファイルや画像も移行する必要がありました。

80
00:07:37.750 --> 00:07:39.070
Drupal 7 では。Media Libraryがありませんでした。

81
00:07:39.130 --> 00:07:52.009
そのため、アセットを格納するために「video」と「photo」コンテンツタイプを使用しました。そして、コンテンツ本文の中でショートコードを使ってそれらを参照していました。

82
00:07:52.900 --> 00:08:01.639
つまり、まず3,000のコンテンツノードと6,000以上のメディアアセットをすべて移行する必要がありました。

83
00:08:01.680 --> 00:08:06.840
そして、インラインのショートコードをすべて新しいメディア埋め込み形式に変換する必要がありました。

84
00:08:07.420 --> 00:08:08.609
これまでコンテンツエディターは、

85
00:08:08.990 --> 00:08:15.719
IMCEを利用してファイルや画像を直接サーバーにアップロードすることができました。

86
00:08:16.030 --> 00:08:22.139
今回の移行では、1,500以上のインラインファイルソースをメディアタイプに変換しました。

87
00:08:22.220 --> 00:08:31.670
これには画像、ドキュメント、埋め込み動画が含まれます。これにより、すべてのファイルが管理されたシステム内にあることが保証されるだけでなく、

88
00:08:31.690 --> 00:08:33.990
システムの安全性も向上しました。

89
00:08:34.390 --> 00:08:41.699
Drupal Migrate APIスクリプトを利用して、合計で10,000以上のコンテンツやアセットを移行しています。

90
00:08:41.789 --> 00:08:48.889
移行プロファイルは、テスト目的のモックアップデータを提供するために、プロジェクトで使い続けました。

91
00:08:49.470 --> 00:08:58.139
各新機能の開発中ローカル環境とクラウドCI環境では、毎回モックアップデータを使用してサイトを構築しています。

92
00:08:58.650 --> 00:09:02.509
これにより、ユニットテストを繰り返し実行し、

93
00:09:02.840 --> 00:09:07.489
より堅牢で信頼性の高いデプロイメントを実現することができました。

94
00:09:08.080 --> 00:09:10.649
移行はプロジェクトにとって重要であり、

95
00:09:10.790 --> 00:09:18.260
内容の確認や結果の検証に多くの労力を要しました。しかし、その価値はあり、

96
00:09:18.350 --> 00:09:22.319
プロジェクトの成功に重要な役割を果たしました。

97
00:09:22.740 --> 00:09:24.079
移行にとどまらず、

98
00:09:24.160 --> 00:09:28.279
プロジェクトを成功に導いた3つの鍵があります。

99
00:09:28.850 --> 00:09:34.670
私たちは、チームと上司に進捗状況を常に伝えるようにしました。

100
00:09:34.820 --> 00:09:46.459
OISTは大きな組織であり、多くの意思決定ルートがあります。そのため、必要に応じてステークホルダーと直接面談を行いました。

101
00:09:46.600 --> 00:09:48.060
また、適切なルートでサポートし、コミュニケーションを取れる人を探しました。

102
00:09:49.930 --> 00:09:56.540
プロジェクトのタスクを管理し、コミュニケーションを支援するツールを効果的に使っています。

103
00:09:57.530 --> 00:10:03.160
ベストなツールはありませんが、チームメンバー全員が喜んで使える適切なツールを探しました。

104
00:10:04.490 --> 00:10:07.659
繰り返しの作業とリスクを減らすために、

105
00:10:07.710 --> 00:10:12.940
私たちはテストとプロセスの自動化に可能な限り頼っています。

106
00:10:13.560 --> 00:10:18.420
これら全ての要素が相まって、プロジェクトは成功するのです。

107
00:10:19.770 --> 00:10:24.459
プロジェクトの最初の段階で、

108
00:10:24.690 --> 00:10:28.530
ベンダーはGitHubとそのProjectツールを使ってタスク管理を行いました。

109
00:10:28.950 --> 00:10:33.069
これにより、開発者と私たちは、プロジェクトマネージャーを通したコミュニケーションだけでなく、

110
00:10:33.140 --> 00:10:36.139
自由にコミュニケーションをとることができるようになりました。

111
00:10:36.780 --> 00:10:43.349
これにより、開発のスピードアップ、作業の透明化、相互の信頼関係の向上が図られました。

112
00:10:44.040 --> 00:10:52.719
納品後は、Shortcutを導入し、開発とコンテンツ制作の両タスクを同じプラットフォームで管理するようにしました。

113
00:10:53.080 --> 00:11:01.410
Shortcutでは、GitHubを統合してプルリクエストの状況を把握し、開発タスクの状況を同期させることができました。

114
00:11:01.640 --> 00:11:10.169
GitHubはすでに多くの人が知っており、そのプロジェクト管理ツールはより成熟し、使いやすくなっています。

115
00:11:10.660 --> 00:11:17.540
Shortcutは開発作業と編集作業の両方を簡単に管理できるタスク管理システムです。

116
00:11:17.870 --> 00:11:22.209
開発と編集のタスクはそれぞれ異なるワークフローを必要とすることから、

117
00:11:22.280 --> 00:11:26.519
Shortcutでそれぞれ異なるワークフローを作成し、

118
00:11:26.700 --> 00:11:31.379
それらを同じEpicやIterationに簡単に取り込むことができます。

119
00:11:31.510 --> 00:11:35.440
これは、複数の機能を持つチームにとって非常に便利な機能です。

120
00:11:36.220 --> 00:11:40.930
Shortcutで Githubと開発タスクのステータスを素早く同期させることができますね。

121
00:11:41.460 --> 00:11:47.139
別々のプラットフォームでありながら、両者の間でシームレスに仕事ができるのです。

122
00:11:47.200 --> 00:11:53.540
2人の開発者で構成される開発チームであり、開発タスクと問題解決に集中する必要があります。

123
00:11:53.830 --> 00:11:57.629
CI/CDプロセスは第3の開発者の役割を果たし、

124
00:11:57.790 --> 00:12:01.969
コーディング標準をチェックし、私たちに代わってコードをデプロイしてくれます。

125
00:12:02.310 --> 00:12:10.699
これにより、開発者はコードをオンライン開発環境にコミットした後、次のタスクに素早く移ることができます。

126
00:12:11.490 --> 00:12:14.310
コミットがCI/CDワークフローを通過したら、

127
00:12:14.600 --> 00:12:18.709
あとはプルリクエストでコードのロジックのレビューに専念し、

128
00:12:18.750 --> 00:12:23.230
CI/CDに本番環境へのデプロイを依頼することができるのです。

129
00:12:23.420 --> 00:12:27.680
ツール、スクリプト、そして継続的なコミュニケーションにより、

130
00:12:27.800 --> 00:12:30.750
プロジェクトをスムーズに完了させることができました。

131
00:12:31.060 --> 00:12:33.790
もちろん、勤勉なチームメンバーの存在が、

132
00:12:34.060 --> 00:12:37.320
プロジェクト成功の核となった。

133
00:12:38.540 --> 00:12:43.970
OISTは、職員や学生を含め、メンバーの50％以上が

134
00:12:44.160 --> 00:12:48.350
外国人であるという、日本ではユニークな大学院大学です。

135
00:12:48.740 --> 00:12:52.429
私たちの細胞シグナルユニットもその例にもれず、

136
00:12:52.620 --> 00:12:57.520
第一線の教授陣、研究仲間、そして学生も世界各国から集まっています。

137
00:12:57.900 --> 00:12:59.079
そのため、

138
00:12:59.270 --> 00:13:03.050
OISTでは英語と日本語が同じくらい重要視されており、

139
00:13:03.140 --> 00:13:09.270
ホームページのコンテンツもほとんどが両言語に翻訳されています。

140
00:13:10.470 --> 00:13:16.420
プロジェクト期間中、私たちは多くの翻訳問題に取り組みました。

141
00:13:16.500 --> 00:13:23.770
本講演の第二部では、特に日本やAPAC地域の参加者のために、そのうちのいくつかに焦点を当てたいと思います。

142
00:13:24.620 --> 00:13:27.839
Drupalはコアにしっかりとした翻訳システムを持っています。

143
00:13:27.930 --> 00:13:30.830
あなたの経験や役割に応じて、

144
00:13:30.900 --> 00:13:34.319
翻訳を行う方法は常にあります。

145
00:13:34.830 --> 00:13:36.149
サイト構築者として、

146
00:13:36.220 --> 00:13:39.509
フィールド翻訳を有効にしたノードを翻訳することができます。

147
00:13:39.700 --> 00:13:44.640
また、ユーザーインターフェースに表示される多くの文字列を翻訳することができます。

148
00:13:45.130 --> 00:13:50.389
TWIGを使って、変数が入った翻訳可能な文章をマークしています。

149
00:13:50.700 --> 00:13:51.949
デベロッパーとして

150
00:13:52.010 --> 00:13:55.540
開発者としては、t()関数で翻訳可能な文字列をマークすればいいのです。

151
00:13:55.750 --> 00:14:00.359
文中で動的変数を使用することも可能です。

152
00:14:00.850 --> 00:14:05.550
しかし、単語が動詞であったり名詞であったり、

153
00:14:05.960 --> 00:14:11.500
複数の意味を持つため、翻訳文脈が必要な場合がある。

154
00:14:11.560 --> 00:14:12.569
例えば

155
00:14:12.680 --> 00:14:13.650
"コンタクト"

156
00:14:13.830 --> 00:14:17.310
日本語では2種類の言葉に翻訳されます

157
00:14:17.840 --> 00:14:19.819
アクションとして、「コンタクト」。

158
00:14:19.890 --> 00:14:23.119
セクションラベルとしては、"連絡先 "です。

159
00:14:23.680 --> 00:14:30.040
ユーザーエクスペリエンスのローカライズについては、最新のDrupalCon Pragueでの私の講演に詳細があります。

160
00:14:30.350 --> 00:14:41.050
もし、あなたが興味を持っていて、バイリンガルサイトによく携わっているのであれば、参考になるかと思います。しかし、今日はプロジェクト特有の、日本語に関連する問題に焦点を当てたいと思います。

161
00:14:41.510 --> 00:14:44.319
考慮すべき問題のひとつは、日付の形式です

162
00:14:44.730 --> 00:14:45.780
日本や

163
00:14:45.880 --> 00:14:47.270
台湾では、

164
00:14:47.330 --> 00:14:53.170
年、月、日の順に記載する形式が一般的です。

165
00:14:53.940 --> 00:14:57.259
海外では、国によって

166
00:14:57.810 --> 00:14:59.490
9月12日とも12月9日とも

167
00:14:59.530 --> 00:15:10.500
解釈される日付形式をよく見かけます。例えば、ヨーロッパの多くの国では12月9日と読みますが、

168
00:15:10.640 --> 00:15:13.149
アメリカでは9月12日と読みます。

169
00:15:13.620 --> 00:15:16.719
OISTのメンバーの多様性を考えると、

170
00:15:16.910 --> 00:15:23.190
情報の理解を一致させるために共通の方法を見つけなければなりません。

171
00:15:24.350 --> 00:15:29.419
そのため、英語版UIではISO 8601形式を使用します。

172
00:15:29.510 --> 00:15:31.940
というのは、日本語のUIでも同じ順序でフォーマットされているからです。

173
00:15:32.670 --> 00:15:41.189
また、日本語、中国語、韓国語（CJK言語と呼ばれることもあります）の入力も重要な課題です。

174
00:15:42.040 --> 00:15:49.810
キーボードでローマ字を打つのは比較的簡単ですが、CJK言語ではどのように文字を打つのでしょうか。

175
00:15:52.180 --> 00:15:59.420
ここでは、"保健所からCOVID-19陽性の通知を受けたらどうするか "について、日中韓の言語でいくつかの段落を紹介します。

176
00:16:00.040 --> 00:16:01.140
CJK言語では、

177
00:16:01.210 --> 00:16:03.689


178
00:16:03.760 --> 00:16:05.989
文に空白が入ることはほとんどありません。

179
00:16:06.220 --> 00:16:10.500
内容をインデックス化し、検索しやすくするために、

180
00:16:11.020 --> 00:16:13.279
通常は余分な処理が必要である。

181
00:16:13.880 --> 00:16:18.259
では、日中韓のキーボードはどうなっているのだろうか。

182
00:16:18.510 --> 00:16:20.089
左から右へ

183
00:16:20.170 --> 00:16:23.399
繁体字中国語のキーボードが2つありますね。

184
00:16:23.440 --> 00:16:32.940
そして、携帯電話には韓国語キーボードと日本語キーボードの2つのレイアウト、つまり50音順のコンパクトなキーボードレイアウト

185
00:16:33.070 --> 00:16:35.479
があります。

186
00:16:35.880 --> 00:16:39.060
知らない人にとっては、

187
00:16:39.230 --> 00:16:41.210
パズルのように見えるかもしれませんね。

188
00:16:42.710 --> 00:16:45.759
単語を入力する際、キーストロークが異なる。

189
00:16:46.180 --> 00:16:47.729
「コンピュータ」という単語も、

190
00:16:48.310 --> 00:16:55.339
台湾の繁体字中国語と中国の簡体字中国語では異なることがわかる。

191
00:16:55.540 --> 00:17:02.470
日中韓の言語を入力する場合、すべてのセグメントを入力して初めて1つの単語が完成する。

192
00:17:02.890 --> 00:17:04.790
英語と違って、

193
00:17:05.030 --> 00:17:08.730
入力が完了する前に単語の組み合わせがあるかもしれない。

194
00:17:11.829 --> 00:17:13.000
動画の中では、

195
00:17:13.470 --> 00:17:16.050
日本語の漢字を入力するには

196
00:17:16.160 --> 00:17:22.480
、1～4個、あるいはそれ以上の発音要素を入力する必要があることが示されています。

197
00:17:23.010 --> 00:17:24.230
さらに、

198
00:17:24.480 --> 00:17:29.320
漢字には同じ読みを持つ異なる単語が存在します。

199
00:17:31.710 --> 00:17:34.879
このため、検索ボックスでは、

200
00:17:34.930 --> 00:17:35.850


201
00:17:35.870 --> 00:17:41.260
実際にキーワードを入力し終わる前に検索が始まってしまい、

202
00:17:41.560 --> 00:17:43.889
ユーザーに迷惑をかけるという問題があります。

203
00:17:44.880 --> 00:17:52.729
この問題は、JavaScriptの特別なイベントメソッドを実装し、

204
00:17:52.890 --> 00:17:55.460
キーワード入力の完了を待ってから検索をトリガーすることで改善されます。

205
00:18:01.720 --> 00:18:03.000
この動画では、

206
00:18:03.100 --> 00:18:04.919
いくつかの改善が見られました。

207
00:18:06.480 --> 00:18:15.119
英語の入力は正常に行われ、日本語の「コロナ」は、単語が完成した時点で初めて検索されることがわかります。

208
00:18:18.880 --> 00:18:24.470
Drupalでは、タグや参照する実体のオートコンプリート欄があります。

209
00:18:24.620 --> 00:18:29.350
コアには以前からこの問題がありましたが、2016年、

210
00:18:29.450 --> 00:18:31.600
Drupalのコントリビューターのおかげで修正されました。

211
00:18:32.360 --> 00:18:40.919
主に、入力が終わった時の特別なイベントを特定するために、CompositionEventを使用しています。

212
00:18:42.480 --> 00:18:48.289
このカスタムオートコンプリート検索ボックスを作成したとき、イベントも実装する必要がありました。

213
00:18:49.080 --> 00:18:54.170
まず、CJK入力メソッドの開始位置を検出します。

214
00:18:54.510 --> 00:18:58.000
次に、compositionEndイベントが起こるので、

215
00:18:58.610 --> 00:19:02.120
単語が決定するまで待ちます。

216
00:19:02.740 --> 00:19:05.779
最後に、このAJAXリクエストを送信します。

217
00:19:06.720 --> 00:19:16.190
タイピングの問題に続いて、ソートの問題を見てみましょう。英語では、記事のタイトル、


218
00:19:16.240 --> 00:19:19.150
分類タグ、名前など、アルファベットを使ってソートすることが多い。

219
00:19:19.360 --> 00:19:20.320
しかし、日本語や中国語でソートする場合は、まったく違います。

220
00:19:20.430 --> 00:19:25.780


221
00:19:25.970 --> 00:19:28.899
日本語では、五十音の順番で並べ替えることは、

222
00:19:29.160 --> 00:19:32.310
ほとんどの人が知っています。

223
00:19:32.430 --> 00:19:33.380


224
00:19:34.100 --> 00:19:37.999
そして、漢字もあります。

225
00:19:38.870 --> 00:19:40.830
ある配列の中に、

226
00:19:40.910 --> 00:19:45.730
アルファベット、数字、ひらがな、カタカナ、

227
00:19:45.910 --> 00:19:47.090
漢字がある場合、

228
00:19:47.360 --> 00:19:49.260
どのようにすれば正しく並べられるのでしょうか。

229
00:19:49.600 --> 00:19:54.359
日本語の理想的な順番は、右のようなものです。

230
00:19:54.600 --> 00:20:03.680
英語のように簡単な数字のアルファベットから始まり、ひらがな、カタカナ、そして最後に漢字。

231
00:20:04.290 --> 00:20:10.010
ひらがな、カタカナは五十音の順番で並んでいます。しかし、漢字ではどのような順番になるのでしょうか？

232
00:20:11.210 --> 00:20:13.730
sort()関数を直接使うと、

233
00:20:14.020 --> 00:20:20.919
Unicodeテーブルの各文字のインデックス番号に基づいて配列がソートされます。

234
00:20:21.090 --> 00:20:30.799
しかし、これは日本語話者にとっては意味がありません。なぜなら、文字の並び順はその言語での適切な並び方を反映していないからです。

235
00:20:32.140 --> 00:20:41.670
JavaScriptの関数localeCompare()を使えば、最初の文字の読み方に基づいて漢字をソートすることができます。

236
00:20:41.770 --> 00:20:45.860
最初の文字が同じなら次の文字も同じにする

237
00:20:46.170 --> 00:20:56.790
PHPにも似たような関数がありますが、バックエンドでよりよいソート結果を得るには、データベースクエリを使用することが推奨されます。

238
00:20:58.760 --> 00:21:04.759
しかし、これは完璧ではなく、真ん中の単語が1つだけ間違っています。

239
00:21:05.390 --> 00:21:06.370
岩下

240
00:21:07.950 --> 00:21:12.040
漢字に別の発音があるからです。

241
00:21:10.180 --> 00:21:12.040


242
00:21:12.110 --> 00:21:17.889
最初の文字は「いわ」ではなく、

243
00:21:17.980 --> 00:21:19.640
「がん」と読みます。

244
00:21:21.390 --> 00:21:29.869
もうひとつ、同じ漢字で「かわの」「こうの」という名字もあります。

245
00:21:30.560 --> 00:21:36.870
日本語でも中国語でも、この漢字は複数の発音を持つことができるんですね。

246
00:21:37.980 --> 00:21:41.179
複数の発音を持つ文字はいくつあるのでしょうか？

247
00:21:41.230 --> 00:21:49.520
日本には2,000ある文字のうち、600以上の文字が複数の読み方を持っています。

248
00:21:50.350 --> 00:21:54.620
台湾の教育部による公式定義では 

249
00:21:54.970 --> 00:22:01.440
一般的に使用される繁体字中国語は5,000字中1,263字であった。

250
00:22:02.450 --> 00:22:04.509
10年ほど前に、

251
00:22:04.620 --> 00:22:09.890
その多くを見直し、統合して

252
00:22:09.980 --> 00:22:11.459
580字に減らした。

253
00:22:12.220 --> 00:22:15.399
漢字を例にしてみましょう。

254
00:22:15.550 --> 00:22:19.999
文化的背景が異なるため、より多くの発音がある。

255
00:22:20.530 --> 00:22:25.379
そのうちの4つは、様々な時代の古代中国から受け継いだ音読であり、

256
00:22:26.090 --> 00:22:30.370
もう4つは本来の日本語の訓読を表している。

257
00:22:31.680 --> 00:22:35.270
元の中国語漢字はよく似ていて、

258
00:22:35.390 --> 00:22:37.530
3つの発音がある。

259
00:22:38.260 --> 00:22:47.949
この文字は、「音楽」を表す樂（ユエ）、「幸せ・幸福」を表す樂（ル）、「鑑賞する」という動詞を表す樂（ヤオ）の頭文字をとったものである。

260
00:22:50.400 --> 00:22:51.570
これで


261
00:22:51.820 --> 00:22:56.249
日本語の発音順がわかりましたね。繁体字中国語はどうでしょうか。

262
00:22:56.630 --> 00:22:59.270
それでは、台湾の美味しいものを紹介しましょう。

263
00:22:59.520 --> 00:23:01.080
私の好きな順に

264
00:23:01.280 --> 00:23:02.920
並べてみました。

265
00:23:03.560 --> 00:23:06.720
では、属性を使って名前を並べ替えるにはどうしたらいいのでしょう？

266
00:23:07.240 --> 00:23:10.070
まず、どのような方法があるか見てみましょう。

267
00:23:11.540 --> 00:23:14.410
これは岩国の一文字

268
00:23:14.570 --> 00:23:15.990
繁体字中国語で "イェン"。

269
00:23:16.730 --> 00:23:19.739
少なくとも4種類の並べ方があります。

270
00:23:20.110 --> 00:23:22.769
部首の画数を数える方法、

271
00:23:23.150 --> 00:23:24.709
総画数を数える方法、

272
00:23:24.830 --> 00:23:26.790
台湾でのみ使われている

273
00:23:26.820 --> 00:23:29.329
音素注音で表記する方法、

274
00:23:30.050 --> 00:23:37.560
または中国での主な入力方法であるローマ字によるピンインで表記する方法である。

275
00:23:38.880 --> 00:23:42.720
通常はいずれかの属性で並び替えを行うが、

276
00:23:42.900 --> 00:23:49.820
図書館の蔵書検索システムのように、ユーザーが並び替えの方法を変更できるようにすることもある。

277
00:23:51.320 --> 00:23:58.350
繁体字中国語では、localeCompare()は先に述べた様々な属性とも連動します。

278
00:23:58.700 --> 00:23:59.900
画数で、

279
00:24:00.290 --> 00:24:02.319
または音声注音で。

280
00:24:03.140 --> 00:24:09.670
これは音韻の要素である注音でソートしています。五十音で日本語をソートするのと同じようなものです。

281
00:24:10.300 --> 00:24:13.979
注音を理解しないと、理解するのは難しいでしょう。

282
00:24:14.730 --> 00:24:16.509
でも、別の方法はもっと簡単です。

283
00:24:16.570 --> 00:24:19.090
これは総画数でソートしています。

284
00:24:19.540 --> 00:24:22.280
左から右へ、最初の文字の

285
00:24:22.340 --> 00:24:25.340
ストロークが多くなっているのがわかります。

286
00:24:25.810 --> 00:24:28.559
JavaScriptがサポートされてるのがすごいよね。

287
00:24:28.610 --> 00:24:34.039
これはオープンソースの貢献者のおかげです。特にUniHanプロジェクトは、

288
00:24:34.100 --> 00:24:38.900
ユニコードのオープンソースプロジェクトの一つです。

289
00:24:35.970 --> 00:24:38.900


290
00:24:39.080 --> 00:24:41.269
そのおかげで、これが使えるようになったんです。

291
00:24:42.110 --> 00:24:48.509
そこで、未解決の問題を考えてみよう。多読漢字をどうするか？

292
00:24:49.110 --> 00:24:57.009
この問題は、日本語の漢字、あるいは漢字を発音要素の注音やピンインで並べ替えたときに発生する。

293
00:24:57.780 --> 00:25:02.329
技術的には、ネイティブスピーカーは、一般的な発音のバリエーションを知っており、

294
00:25:02.370 --> 00:25:05.589
頭の中で処理する際、一緒に処理されるため、

295
00:25:06.390 --> 00:25:11.620
異なる発音が混在していても、ネイティブスピーカーは

296
00:25:11.920 --> 00:25:14.049
あまり気にならないのである。

297
00:25:14.690 --> 00:25:17.450
ただし、私の認識が間違っている可能性もありますので、

298
00:25:17.640 --> 00:25:22.710
具体的な解決策をお聞かせいただければと思います。

299
00:25:23.530 --> 00:25:28.960
もし、クライアントが明示的な順序を要求してきた場合は、

300
00:25:29.210 --> 00:25:34.660
あらかじめ定義されたテーブルや配列に単語をマッピングするのが良い方法です。

301
00:25:37.810 --> 00:25:40.769
最後に、ある一文を紹介したい。

302
00:25:41.120 --> 00:25:42.660
"Devil is in the details" 

303
00:25:42.740 --> 00:25:44.700
という言葉を耳にすることがある。

304
00:25:44.910 --> 00:25:51.140
この意味は、「細部にまで目を向けないと、困難や問題は見えてこない」というものである。

305
00:25:51.980 --> 00:25:55.029
文の成り立ちが何となく逆なんですよね。

306
00:25:56.150 --> 00:25:58.050
"神は細部に宿る"

307
00:25:58.800 --> 00:26:00.310
ドイツの建築家、

308
00:26:00.370 --> 00:26:02.740
ミース・ファン・デル・ローエの言葉です。

309
00:26:03.130 --> 00:26:05.539
"Der liebe Gott steckt im detail" である。

310
00:26:06.100 --> 00:26:08.510
悪魔でも神でも、

311
00:26:08.910 --> 00:26:11.270
この文に共通することは一つ。

312
00:26:11.490 --> 00:26:15.369
一番大事なことは、細かいところにある。

313
00:26:16.010 --> 00:26:20.819
新しいサイトが完成したとき、人々は歓声を上げ、満足感を覚えます。

314
00:26:21.140 --> 00:26:26.210
そして、そのウェブサイトを訪れた人が、自分の言語で直感的に操作できることに喜びを感じるとき。

315
00:26:26.620 --> 00:26:33.409
それは、開発者・デザイナーが最高のUXを実現するために、

316
00:26:33.560 --> 00:26:34.920
細部にまでこだわっているからです。

317
00:26:35.920 --> 00:26:39.039
そして、よく見て、チャレンジして、

318
00:26:39.200 --> 00:26:40.630
悪魔と取引して、

319
00:26:40.750 --> 00:26:44.039
最後には輝かしい奇跡を見つけましょう。

320
00:26:45.410 --> 00:26:50.760
どうも、クリスです。今日は以下のセッションで良い午後を過ごせますように。

321
00:26:51.210 --> 00:26:53.410
ご清聴ありがとうございました。

